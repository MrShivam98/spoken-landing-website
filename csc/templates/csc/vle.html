{% extends "csc_base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title%} CSC - VLE Dashboard {% endblock title%}



{% block content%}
 <div style="margin-top: 6.5%; background-color: #FDF5E6;">
hello
    <div>
        <form action="" method="post">
            <div class='form-row'>
                <div class='col-xs-12 form-group required'>
                <label class='control-label'>Programme Type</label>
                {% render_field form.programme_type class+="form-control programme_type" tabindex="1" %}
                {{ form.programme_type.errors }}
                </div>
            </div>

            <div class='form-row'>
                <div class='col-xs-12 form-group required'>
                <label class='control-label'>Foss</label>
                {% render_field form.spoken_foss class+="form-control spoken_foss" tabindex="1" %}
                {{ form.spoken_foss.errors }}
                </div>
            </div>

        <button type="submit" class="btn form-btn">Submit</button>       
        </form> 
    </div>

 </div>
{% endblock content%}

{% block jsblock %}
<script>
    
    $(document).ready(function(){


      if($('.programme_type').val() == '') {
        $('.spoken_foss').val('');
        $('.spoken_foss').prop('disabled', 'disabled');
        // $('.course').html('<option>---------</option>');
        // $('.course').prop('disabled', 'disabled');
      }




    $('.programme_type').on('change', function(){
        programme_type = $(this).val();
        programme_type_name = $(this).children("option").filter(":selected").text()

        $('.spoken_foss').html('<option>---------</option>');
        if(programme_type != ''){
            $.ajax({
                url: "/get-foss-option/",
                type: "POST",
                data: {
                    programme_type: programme_type,
                },
                beforeSend: function() {
                },
                success: function(data) {
                    // loading languages
                    if(data && data['spoken_foss_option']) {
                    $('.spoken_foss').html(data['spoken_foss_option']);
                    }
                 
                }
            });
        }
    });



    });
  </script>
{% endblock %}
